# Анализ Проекта: PermitPilot (NextN)

## Назначение Проекта
Этот проект представляет собой **Систему управления заявками на получение разрешений (Permit Application Management System)**. Его основная цель — упростить и ускорить процесс подачи и проверки строительных разрешений с помощью искусственного интеллекта (Genkit).

Проект нацелен на автоматизацию рутинных задач, таких как проверка соответствия строительным нормам, генерация чек-листов и извлечение данных из документов.

## Технологический Стек
*   **Frontend:** Next.js 15 (App Router), Tailwind CSS, Shadcn/UI.
*   **Backend / Инфраструктура:** Firebase (Firestore, Auth), Firebase App Hosting.
*   **AI:** Genkit (Google AI SDK) для реализации логики генеративного ИИ.

## Текущий Функционал
В проекте реализованы следующие ключевые модули:
1.  **Code Validator (Валидатор Кодов):** Проверка текста заявки на соответствие строительным нормам.
2.  **Checklist Generator (Генератор Чек-листов):** Создание чек-листа на основе фотографий и голосового ввода.
3.  **Document Autofill (Автозаполнение):** Извлечение структурированных данных из загруженных документов.
4.  **Dashboard:** Панель управления (перенаправление с главной страницы).

## Что нужно доработать (Recommendations)

На основе анализа кодовой базы выявлены следующие области для улучшения:

### 1. Внедрение RAG (Retrieval-Augmented Generation)
*   **Проблема:** В текущей реализации (`validate-permit-application-against-local-codes.ts`) строительные нормы передаются вручную как текст. В `validator-form.tsx` используются хардкодные `mockCodes`.
*   **Решение:** Необходимо реализовать RAG. Строительные кодексы должны храниться в векторной базе данных, и при проверке заявки система должна автоматически находить релевантные статьи кодекса, а не требовать их ввода от пользователя.

### 2. Тестирование
*   **Проблема:** В проекте полностью отсутствуют тесты. Поиск по файлам `.test.ts` или `.spec.ts` не дал результатов.
*   **Решение:** Необходимо написать Unit-тесты для AI-потоков и Integration-тесты для компонентов React. Это критично для обеспечения надежности валидации разрешений.

### 3. Аутентификация и Безопасность
*   **Проблема:** Аутентификация реализована базово (Anonymous Sign-in) или через методы `initiateEmailSignIn`, которые пока выглядят как заготовки. Конфигурация Firebase (`firebaseConfig`) захардкожена в `src/firebase/config.ts`.
*   **Решение:**
    *   Реализовать полноценную систему ролей (Заявитель, Инспектор).
    *   Вынести ключи API и конфигурацию Firebase в переменные окружения (`.env`).

### 4. Работа с данными
*   **Проблема:** Множество данных на фронтенде являются заглушками (Mock data).
*   **Решение:** Подключить формы к реальной базе данных Firestore для сохранения заявок и истории проверок.

### 5. Улучшение UX/UI
*   **Проблема:** Обработка ошибок минимальна.
*   **Решение:** Добавить более детальные сообщения об ошибках и статусы загрузки (Skeleton loaders) при взаимодействии с AI.

### 6. Исправление Ошибок Сборки (TypeScript)
*   **Проблема:** Обнаружены ошибки типизации при запуске `npm run typecheck`:
    *   `src/components/ui/calendar.tsx`: Ошибки совместимости с новой версией `react-day-picker` (свойства `IconLeft`/`IconRight` удалены).
    *   `src/lib/seed-db.ts`: Неправильное использование Firebase SDK (`collection.doc` вместо функции `doc()`).
*   **Решение:** Исправить компоненты и скрипты для успешной сборки проекта.
